<div>
    <fieldset>
        <legend>Crear cuenta bancaria</legend>
    </fieldset>
    <tabset>
        <tab heading="Cuenta de ahorro">
            <br/>
            <div ng-controller="CrearCuentaAhorroController">
                <alert ng-repeat="alert in alerts" type="{{alert.type}}" close="closeAlert($index)">
                    <span ng-bind-html="alert.msg"></span>
                </alert>
                <form name="formCrearCuenta" ng-submit="crearCuenta()" novalidate>
                    <fieldset>
                        <legend>Socio</legend>
                        <div class="row">
                            <div class="col-sm-4">
                                <div class="form-group" ng-class="{ 'has-error' : formCrearCuenta.tipoPersona.$invalid && control.submitted}">
                                    <label>Tipo persona</label>
                                    <select name="tipoPersona" ng-options="tipoPersona.denominacion as tipoPersona.denominacion for tipoPersona in tipoPersonas" ng-model="transaccion.tipoPersona" ng-change="tipoPersonaChange()" class="form-control" required autofocus>
                                    </select>
                                    <div ng-show="formCrearCuenta.tipoPersona.$invalid && control.submitted">
                                        <p class="help-block" ng-show="formCrearCuenta.tipoPersona.$error.required">
                                            Ingrese tipo persona.
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-4">
                                <div class="form-group" ng-class="{ 'has-error' : formCrearCuenta.tipoDocumento.$invalid && control.submitted}">
                                    <label>Tipo documento</label>
                                    <select name="tipoDocumento" ng-options="tipoDocumento.id as tipoDocumento.abreviatura for tipoDocumento in tipoDocumentos" ng-model="transaccion.idTipoDocumento" class="form-control" required>
                                    </select>
                                    <div ng-show="formCrearCuenta.tipoDocumento.$invalid && control.submitted">
                                        <p class="help-block" ng-show="formCrearCuenta.tipoDocumento.$error.required">
                                            Ingrese tipo documento.
                                        </p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-4">
                                <div class="form-group" ng-class="{ 'has-error' : formCrearCuenta.numeroDocumento.$invalid && control.submitted}">
                                    <label>Numero documento</label>
                                    <input type="text" name="numeroDocumento" ui-keypress="{13:'buscarPersonaSocio($event)'}" ng-model="transaccion.numeroDocumento" ng-minlength="1" ng-maxlength="20" ng-pattern="/^[0-9]+$/" class="form-control" placeholder="Numero documento" required/>
                                    <div ng-show="formCrearCuenta.numeroDocumento.$invalid && control.submitted">
                                        <p class="help-block" ng-show="formCrearCuenta.numeroDocumento.$error.required">
                                            Ingrese numero documento valido.
                                        </p>
                                        <p class="help-block" ng-show="formCrearCuenta.numeroDocumento.$error.minlength">
                                            Minimo 1 caracter.
                                        </p>
                                        <p class="help-block" ng-show="formCrearCuenta.numeroDocumento.$error.maxlength">
                                            Maximo 20 caracteres.
                                        </p>
                                        <p class="help-block" ng-show="formCrearCuenta.numeroDocumento.$error.pattern">
                                            Numero documento invalido.
                                        </p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-4">
                                <div class="form-group">
                                    <label>&nbsp;</label>
                                    <div class="input-group">
                                        <button type="button" ng-click="buscarPersonaSocio($event)" class="btn btn-primary">Buscar</button>
                                        <button type="button" ng-click="crearPersona()" class="btn btn-link">Nueva persona</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </fieldset>
                    <fieldset>
                        <legend>Datos de la cuenta</legend>
                        <div>
                            <div class="row">
                                <div class="col-sm-4">
                                    <div class="form-group" ng-class="{ 'has-error' : formCrearCuenta.moneda.$invalid && control.submitted}">
                                        <label>Moneda</label>
                                        <select name="moneda" ng-options="moneda.id as moneda.denominacion for moneda in monedas" ng-model="transaccion.idMoneda" ng-change="monedaChange()" class="form-control" required>
                                        </select>
                                        <div ng-show="formCrearCuenta.moneda.$invalid && control.submitted">
                                            <p class="help-block" ng-show="formCrearCuenta.moneda.$error.required">
                                                Ingrese tipo moneda.
                                            </p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-4">
                                    <div class="form-group">
                                        <label>Tasa de interes</label>
                                        <kbd style="display: block;margin-top: 3px;">
                                            <span ng-bind="(transaccion.tasaInteres * 100)| number : 3"/>
                                        </kbd>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-4">
                                    <div class="form-group" ng-class="{ 'has-error' : formCrearCuenta.cantRetirantes.$invalid && control.submitted}">
                                        <label>Cantidad retirantes</label>
                                        <input type="number" name="cantRetirantes" ng-model="transaccion.cantRetirantes" ng-minlength="1" ng-maxlength="1" ng-pattern="/^[0-9]+$/" class="form-control" placeholder="Cantidad" required/>
                                        <div ng-show="formCrearSocio.cantRetirantes.$invalid && control.submitted">
                                            <p class="help-block" ng-show="formCrearSocio.cantRetirantes.$error.required">
                                                Ingrese numero valido.
                                            </p>
                                            <p class="help-block" ng-show="formCrearSocio.cantRetirantes.$error.maxlength">
                                                Maximo 1 caracter.
                                            </p>
                                            <p class="help-block" ng-show="formCrearSocio.cantRetirantes.$error.pattern">
                                                Numero invalido.
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </fieldset>

                    <fieldset>
                        <legend>Resumen</legend>
                        <div>
                            <div class="row">
                                <div class="col-sm-4">
                                    <div class="panel panel-default">
                                        <!-- Default panel contents -->
                                        <div class="panel-heading">Socio</div>
                                        <div class="panel-body" ng-show="socioNatural && socioJuridico">
                                            <p>Socio no encontrado</p>
                                        </div>
                                        <table class="table table-condensed" ng-show="socioNatural">
                                            <tbody>
                                            <tr>
                                                <td>Documento:</td>
                                                <td colspan="3"><span ng-bind-template="{{socioNatural.tipoDocumento.abreviatura}}/{{socioNatural.numeroDocumento}}"></span></td>
                                            </tr>
                                            <tr>
                                                <td>Socio:</td>
                                                <td colspan="3"><span ng-bind-template="{{socioNatural.apellidoPaterno}} {{socioNatural.apellidoMaterno}},{{socioNatural.nombres}}"></span></td>
                                            </tr>
                                            <tr>
                                                <td>F. nac.:</td>
                                                <td><span ng-bind="socioNatural.fechaNacimiento | date : 'dd/MM/yyyy'"></span></td>
                                            </tr>
                                            <tr>
                                                <td>Sexo:</td>
                                                <td><span ng-bind="socioNatural.sexo"></span></td>
                                            </tr>
                                            </tbody>
                                        </table>
                                        <table class="table table-condensed" ng-show="socioJuridico">
                                            <tbody>
                                            <tr>
                                                <td>Documento:</td>
                                                <td colspan="3"><span ng-bind-template="{{socioJuridico.tipoDocumento.abreviatura}}/{{socioJuridico.numeroDocumento}}"></span></td>
                                            </tr>
                                            <tr>
                                                <td>Socio:</td>
                                                <td colspan="3"><span ng-bind="socioJuridico.razonSocial"></span></td>
                                            </tr>
                                            <tr>
                                                <td>F. constitucion.:</td>
                                                <td><span ng-bind="socioJuridico.fechaConstitucion | date : 'dd/MM/yyyy'"></span></td>
                                            </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                                <div class="col-sm-8">
                                    <div class="panel panel-default">
                                        <!-- Default panel contents -->
                                        <div class="panel-heading">Titulares</div>
                                        <table class="table table-condensed">
                                            <thead>
                                            <tr>
                                                <th>
                                                    Documento
                                                </th>
                                                <th>
                                                    Ap. y nombres
                                                </th>
                                                <th>F. nac.</th>
                                                <th></th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr>
                                                <td>DNI:48152615</td>
                                                <td>FLORES HUERTAS, JHON WILBER</td>
                                                <td>01/05/2014</td>
                                                <td>01/05/2014</td>
                                                <td>
                                                    <button type="button" class="btn btn-danger btn-xs">Del</button>
                                                </td>
                                            </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </fieldset>
                    <button type="button" class="btn btn-primary">Guardar</button>
                    <button type="button" class="btn btn-default">Cancelar</button>
                </form>
            </div>
        </tab>
        <tab heading="Titulares">
            <div ng-include="'modules/caja/views/cuenta/titular.html'"></div>
        </tab>
        <tab heading="Beneficiarios">
            <div ng-include="'modules/caja/views/cuenta/beneficiario.html'"></div>
        </tab>
    </tabset>
</div>